<!DOCTYPE html>
<html>
  <head>
    <title>My first Chartist Tests</title>
    <link rel="stylesheet"
          href="css/chartist.min.css">
    <script src="javascript/chartist.min.js"></script>
    <script>
      function getParameterByName(name, url) {
          if (!url) url = window.location.href;
          name = name.replace(/[\[\]]/g, "\\$&");
          var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
              results = regex.exec(url);
          if (!results) return null;
          if (!results[2]) return '';
          return decodeURIComponent(results[2].replace(/\+/g, " "));
      }
    </script>
    <style>
    body{
        background: #EADBC4;
        color: #5b4421;
        cursor: auto;
        font-style: normal;
        font-weight: 400;
        margin: 0;
    }
    .graph_box {
        width: 75%;
        margin-left: 12.5%;
    }
    </style>
  </head>
  <body>
    <div class="ct-chart ct-perfect-fourth graph_box"></div>
    <!-- Site content goes here !-->
    <script>
      var demo_labels = ["Demo 1", "Demo 2", "Demo 3", "Demo 4"]
      var demo_series =  [ // TODO extract this from url
          [800000, 1200000, 1400000, 1300000],
          [200000, 400000, 500000, 300000],
          [100000, 200000, 400000, 600000]
        ];
      var final_labels = demo_labels;
      try {
        temp_labels = eval(getParameterByName('labels'));
        if (temp_labels != null){
          final_labels = temp_labels;
        }
      } catch (err) {
        console.log("problem extracting labels from query string:");
        console.log(err);
      }

      var final_series = demo_series;
      try {
        temp_series = eval(getParameterByName('series'));
        if (temp_series != null ){
          final_series = temp_series;
        }
      } catch (err) {
        console.log("problem extracting series from query string:");
        console.log(err);
      }

      var qs_series = eval(getParameterByName('series'))
      new Chartist.Bar('.ct-chart', {
        labels: final_labels,
        series: final_series
      }, {
        stackBars: true,
        axisY: {
          labelInterpolationFnc: function(value) {
            return (value / 1000) + 'k';
          }
        }
      }).on('draw', function(data) {
        if(data.type === 'bar') {
          data.element.attr({
            style: 'stroke-width: 30px'
          });
        }
      });
    
    </script>
  </body>
</html>
